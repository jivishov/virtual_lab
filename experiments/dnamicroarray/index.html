<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual DNA Microarray Lab: Lung Cancer Study</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Virtual DNA Microarray Lab: Lung Cancer Study</h1>
    <p>Scenario: Analyzing gene expression in lung cancer patients (Patient 1: Grandpa Joe).</p>

    <div id="lab-bench">
        <!-- COLUMN 1: Instructions -->
        <div id="instructions-column">
            <div id="instructions">
                <h2>Instructions:</h2>
                <p id="instruction-text">Welcome! Click 'Start Experiment' to begin.</p>
                <button id="start-button">Start Experiment</button>
                <!-- <button id="skip-button" style="background-color: #ffcc00; margin-top: 10px;">TEMP: Skip to Analysis</button> -->
                <div id="progress-checklist">
                     <h4>Steps Checklist:</h4>
                     <ul>
                        <li id="step-orient">Orient Card & Plate</li>
                        <li id="step-eb">Apply Equilibration Buffer (EB)</li>
                        <li id="step-dry1">Dry Card (Post-EB)</li>
                        <li id="step-mix-spot">Mix Control cDNA & Spot Samples</li>
                        <li id="step-dry2">Dry Card (Post-Sample)</li>
                        <li id="step-hb">Apply Hybridization Buffer (HB)</li>
                        <li id="step-dry3">Dry Card (Post-HB)</li>
                        <li id="step-visualize">Visualize with UV Light</li>
                        <li id="step-analyze">Analyze Results</li>
                     </ul>
                </div>
            </div>
        </div>

        <!-- COLUMN 2: Tools & Reagents -->
        <div id="tools-reagents-column">
            <div id="tools">
                <h2>Tools</h2>
                <!-- Replace Pipette Area with SVG -->
                <div class="svg-tool-container">
                    <svg viewBox="0 0 40 160" width="40" height="160" class="tool-svg" id="pipette-svg">
                        <title>Micropipette (5 µL)</title>
                        <defs>
                            <filter id="shadow-pipette" x="-20%" y="-20%" width="140%" height="140%">
                                <feDropShadow dx="1" dy="1" stdDeviation="1" flood-color="#000" flood-opacity="0.3"/>
                            </filter>
                        </defs>
                        <g filter="url(#shadow-pipette)" stroke="#333" stroke-width="1">
                            <circle cx="20" cy="10" r="8" fill="#6c757d"/>
                            <rect x="18" y="10" width="4" height="15" fill="#adb5bd"/>
                            <path d="M 12 25 H 28 V 85 L 24 95 H 16 L 12 85 Z" fill="#ADD8E6"/>
                            <rect x="26" y="30" width="8" height="15" rx="3" ry="3" fill="#6c757d"/>
                            <rect x="15" y="60" width="10" height="15" fill="#FFFFFF" stroke-width="0.5"/>
                            <text x="20" y="71" font-size="7" text-anchor="middle" fill="#000" stroke="none">5µL</text>
                            <path d="M 16 95 L 24 95 L 22 110 L 18 110 Z" fill="#BDC3C7"/>
                        </g>
                        <g id="pipette-tip-mount" transform="translate(20, 110)">
                            <!-- Tip and Liquid SVGs will be added here by JS -->
                        </g>
                    </svg>
                </div>

                <!-- Tool SVGs (Replacing Buttons) -->
                <div class="tool-grid"> <!-- Wrapper for tool icons -->
                    <svg viewBox="0 0 60 55" width="60" class="tool-svg" id="tip-box-svg">
                         <title>Get New Tip (Tip Box)</title>
                         <defs> <filter id="shadow-tipbox" x="-20%" y="-20%" width="140%" height="140%"> <feDropShadow dx="1" dy="1" stdDeviation="1" flood-color="#000" flood-opacity="0.3"/> </filter> <pattern id="tipPattern" patternUnits="userSpaceOnUse" width="10" height="10" x="5" y="5"> <circle cx="3" cy="3" r="2" fill="#E0E0E0" /> </pattern> </defs>
                         <g filter="url(#shadow-tipbox)"> <rect x="4" y="2" width="52" height="8" rx="2" ry="2" fill="#D0D0D0" stroke="#555" stroke-width="1"/> <rect x="2" y="10" width="56" height="25" rx="2" ry="2" fill="#F5F5F5" stroke="#555" stroke-width="1"/> <rect x="5" y="13" width="50" height="20" rx="1" ry="1" fill="url(#tipPattern)" stroke="none"/> </g>
                         <text x="30" y="48" font-size="10" text-anchor="middle" fill="#333">Get Tip</text>
                    </svg>

                    <svg viewBox="0 0 50 70" width="50" class="tool-svg" id="waste-bin-svg">
                        <title>Discard Tip (Waste Bin)</title>
                        <defs> <filter id="shadow-wastebin" x="-20%" y="-20%" width="140%" height="140%"> <feDropShadow dx="1" dy="1" stdDeviation="1" flood-color="#000" flood-opacity="0.3"/> </filter> </defs>
                        <g stroke="#333" stroke-width="1.5" filter="url(#shadow-wastebin)"> <path d="M 5 5 H 35 L 30 50 Q 30 55 20 55 Q 10 55 10 50 Z" fill="#DC143C"/> <ellipse cx="20" cy="5" rx="15" ry="2" fill="#C0C0C0" /> </g>
                        <text x="25" y="65" font-size="10" text-anchor="middle" fill="#333">Discard Tip</text>
                   </svg>

                    <svg viewBox="0 0 60 60" width="60" class="tool-svg" id="incubator-svg">
                         <title>Incubate (Dry)</title>
                         <defs> <filter id="shadow-incubator" x="-20%" y="-20%" width="140%" height="140%"> <feDropShadow dx="1" dy="1" stdDeviation="1" flood-color="#000" flood-opacity="0.3"/> </filter> </defs>
                         <g filter="url(#shadow-incubator)"> <rect x="2" y="2" width="56" height="40" rx="3" ry="3" fill="#F5F5DC" stroke="#666" stroke-width="1"/> <rect x="8" y="8" width="44" height="28" rx="2" ry="2" fill="none" stroke="#888" stroke-width="1"/> <rect x="50" y="18" width="3" height="8" rx="1" ry="1" fill="#AAAAAA" stroke="#555" stroke-width="0.5"/> <rect x="12" y="30" width="15" height="4" rx="1" ry="1" fill="#CCCCCC" stroke="#555" stroke-width="0.5"/> </g>
                         <text x="30" y="55" font-size="10" text-anchor="middle" fill="#333">Incubate</text>
                    </svg>

                    <svg viewBox="0 0 60 55" width="60" class="tool-svg" id="uv-light-svg">
                         <title>Toggle UV Light</title>
                         <defs> <filter id="shadow-uvbutton" x="-20%" y="-20%" width="140%" height="140%"> <feDropShadow dx="1" dy="1" stdDeviation="1" flood-color="#000" flood-opacity="0.3"/> </filter> <linearGradient id="uvGradient" x1="0%" y1="0%" x2="100%" y2="100%"> <stop offset="0%" style="stop-color:#483D8B;stop-opacity:1" /> <stop offset="100%" style="stop-color:#8A2BE2;stop-opacity:1" /> </linearGradient> </defs>
                         <g filter="url(#shadow-uvbutton)"> <rect x="2" y="2" width="56" height="30" rx="5" ry="5" fill="url(#uvGradient)" stroke="#333" stroke-width="1"/> <text x="30" y="22" font-size="14" font-weight="bold" text-anchor="middle" fill="#FFFFFF">UV</text> </g>
                         <text x="30" y="48" font-size="10" text-anchor="middle" fill="#333">UV Light</text>
                    </svg>
                </div>
                 <!-- Original buttons removed -->
            </div>
            <div id="reagents">
                <h2>Reagents</h2>
                <div class="reagent-grid">
                    <!-- EB Tube -->
                    <svg viewBox="0 0 50 120" width="40" height="80" class="reagent-tube" id="eb-tube-svg"> <!-- Adjusted ViewBox -->
                        <title>Equilibration Buffer (EB)</title>
                        <g stroke="#333" stroke-width="1.5" fill="none">
                            <path d="M 10 5 Q 25 -2 40 5 L 42 15 L 8 15 Z" fill="#AAAAAA"/>
                            <path d="M 8 15 V 80 Q 8 95 25 95 Q 42 95 42 80 V 15 Z" fill="#FFFFFF" />
                            <path d="M 12 55 V 80 Q 12 90 25 90 Q 38 90 38 80 V 55 Z" fill="skyblue" stroke="none" class="liquid-fill"/>
                        </g>
                        <text x="25" y="115" font-size="12" text-anchor="middle" fill="#333">EB</text>
                    </svg>
                    <!-- cDNA Tube -->
                    <svg viewBox="0 0 50 120" width="40" height="80" class="reagent-tube" id="cdna-tube-svg"> <!-- Adjusted ViewBox -->
                        <title>Control cDNA (Green)</title>
                        <g stroke="#333" stroke-width="1.5" fill="none">
                             <path d="M 10 5 Q 25 -2 40 5 L 42 15 L 8 15 Z" fill="#AAAAAA"/>
                             <path d="M 8 15 V 80 Q 8 95 25 95 Q 42 95 42 80 V 15 Z" fill="#FFFFFF" />
                             <path d="M 12 55 V 80 Q 12 90 25 90 Q 38 90 38 80 V 55 Z" fill="lightgreen" stroke="none" class="liquid-fill"/>
                        </g>
                         <text x="25" y="115" font-size="12" text-anchor="middle" fill="#333">cDNA</text>
                    </svg>
                    <!-- HB Tube -->
                    <svg viewBox="0 0 50 120" width="40" height="80" class="reagent-tube" id="hb-tube-svg"> <!-- Adjusted ViewBox -->
                        <title>Hybridization Buffer (HB)</title>
                         <g stroke="#333" stroke-width="1.5" fill="none">
                             <path d="M 10 5 Q 25 -2 40 5 L 42 15 L 8 15 Z" fill="#AAAAAA"/>
                             <path d="M 8 15 V 80 Q 8 95 25 95 Q 42 95 42 80 V 15 Z" fill="#FFFFFF" />
                             <path d="M 12 55 V 80 Q 12 90 25 90 Q 38 90 38 80 V 55 Z" fill="violet" stroke="none" class="liquid-fill"/>
                         </g>
                         <text x="25" y="115" font-size="12" text-anchor="middle" fill="#333">HB</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- COLUMN 3: Right Panel (Microarray & Plate) -->
        <div id="right-panel">
            <div id="microarray-station">
                <h2>Microarray Card with Spots</h2>
                 <div class="card-labels">
                     <span></span> <!-- Spacer -->
                     <span>1<br>Normal</span>
                     <span>2<br>Up</span>
                     <span>3<br>Down</span>
                     <span>4<br>Blank</span>
                     <span>5<br>Gene 1<br>(CEACAM6)</span>
                     <span>6<br>Gene 2<br>(SFTPB)</span>
                     <span>7<br>Gene 3<br>(TP53)</span>
                     <span>8<br>Gene 4<br>(SRY)</span>
                     <span>9<br>Gene 5<br>(CYP1A1)</span>
                 </div>
                <div id="microarray-card">
                     <!-- Spots will be generated by JS -->
                </div>
            </div>
            <div id="quickstrip-station">
                <h2>QuickStrip™ Plate with Wells (Patient Samples)</h2>
                <div id="quickstrip-plate">
                    <!-- Wells will be generated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Section -->
     <div id="analysis-section" class="hidden">
        <h2>Analysis</h2>
        <p>Record the results based on the spot colors observed on the Microarray Card.</p>
        <p>
            Enter the following into the table below: <br>
            <b>'u'</b> or <b>'↑'</b> for <span style="color: red; font-weight:bold;">Red</span> (Up-regulated/Increased)<br>
            <b>'d'</b> or <b>'↓'</b> for <span style="color: green; font-weight:bold;">Green</span> (Down-regulated/Decreased)<br>
            <b>'n'</b> or <b>'='</b> for <span style="color: #cccc00; background-color: #555; padding: 0 2px; font-weight:bold;">Yellow</span> (Normal/Same)<br>
            <b>'-'</b> or <b>'b'</b> for <span style="color: white; background-color: black; padding: 0 2px; font-weight:bold;">Black</span> (None/Blank)<br>
            (Leaving a box empty is also treated as 'None' for black spots).
        </p>
        <table id="results-table">
            <thead>
                <tr>
                    <th>Patient</th>
                    <th>1 (Normal)</th><th>2 (Up)</th><th>3 (Down)</th><th>4 (Blank)</th>
                    <th>5 (Gene 1)</th><th>6 (Gene 2)</th><th>7 (Gene 3)</th><th>8 (Gene 4)</th><th>9 (Gene 5)</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <div class="analysis-buttons">
             <button id="check-results-button">Check My Results</button>
             <button id="erase-table-button" style="margin-left: 10px;">Erase Table</button>
        </div>
        <p id="results-feedback"></p>
     </div>

    <script src="script.js"></script>
</body>
</html>
